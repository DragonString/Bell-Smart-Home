<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorate="~{layout/PrimaryLayout}">
	<head>
		<title>노드</title>
	</head>
	<body>
		<th:block layout:fragment="content">
			<!-- Page Head Line Start -->
			<div class="d-sm-flex align-items-center justify-content-between mb-4">
				<h1 class="h3 mb-0">Monitor</h1>
				<a href="#" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Generate Report</a>
			</div>
			<!-- Page Head Line End -->
			
			<!-- Monitor Row Start -->
			<div class="row">
				<!-- Node Card Start -->
				<div class="col-xl-3 col-md-6 mb-4" th:if="${not #lists.isEmpty(listNode)}" th:each="nodeValue : ${listNode}">
					<div class="card shadow">
						<div class="card-header bg-primary" th:text="${ nodeValue.alias }"></div>
						<div class="card-body text-dark">
							<div class="card-text">
								<div th:if="${ not #lists.isEmpty(nodeValue.nodeItems) }" th:each="nodeItemValue : ${nodeValue.nodeItems}" th:with="curStatus=${ nodeItemValue.nodeItemHistories[#lists.size(nodeItemValue.nodeItemHistories) - 1].pinStatus }">
									<span th:text="${nodeItemValue.alias}"></span>
									<div class="progress mb-4">
										<div th:if="${nodeItemValue.pinMode == T(net.softbell.bsh.domain.PinModeRule).OUTPUT }" th:style="${curStatus == 1} ? 'width: 100%' : 'width: 0%'" class="progress-bar progress-bar-striped progress-bar-animated bg-success"></div>
										<div th:if="${nodeItemValue.pinMode == T(net.softbell.bsh.domain.PinModeRule).INPUT and nodeItemValue.pinType == T(net.softbell.bsh.domain.PinTypeRule).DIGITAL}" th:style="${curStatus == 1} ? 'width: 100%' : 'width: 0%'" class="progress-bar progress-bar-striped progress-bar-animated bg-success"></div>
										<div th:if="${nodeItemValue.pinMode == T(net.softbell.bsh.domain.PinModeRule).INPUT and nodeItemValue.pinType == T(net.softbell.bsh.domain.PinTypeRule).ANALOG}" th:style="|width: ${curStatus / 10}%|" class="progress-bar progress-bar-striped progress-bar-animated bg-success"></div>
									</div>
								</div>
							</div>
						</div>
						<div class="card-footer">
							<small class="text-muted" th:text="|노드 제어 모드: ${nodeValue.controlMode}|"></small>
						</div>
					</div>
				</div>
				<!-- Node Card End -->
			</div>
			<!-- Monitor Row End -->
		</th:block>
	</body>
</html>